var e=require("html-to-image"),t=require("save-svg-as-png"),n=require("file-saver");function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}var u=/*#__PURE__*/"undefined"!=typeof Symbol?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function a(e,t,n){if(!e.s){if(n instanceof l){if(!n.s)return void(n.o=a.bind(null,e,t));1&t&&(t=n.s),n=n.v}if(n&&n.then)return void n.then(a.bind(null,e,t),a.bind(null,e,2));e.s=t,e.v=n;var r=e.o;r&&r(e)}}var l=/*#__PURE__*/function(){function e(){}return e.prototype.then=function(t,n){var r=new e,i=this.s;if(i){var o=1&i?t:n;if(o){try{a(r,1,o(this.v))}catch(e){a(r,2,e)}return r}return this}return this.o=function(e){try{var i=e.v;1&e.s?a(r,1,t?t(i):i):n?a(r,1,n(i)):a(r,2,i)}catch(e){a(r,2,e)}},r},e}();function c(e){return e instanceof l&&1&e.s}var f={filename:"Image",forceFixText:!1,printDate:!0},s=function(e){var t=window.getComputedStyle(e);e.style.color=t.color},h=function(e){var t=window.getComputedStyle(e);e.style.width=t.width,e.style.height=t.height},d=function(e,t){void 0===t&&(t=["b","h1","h2","h3","h4","h5","h6","i","mark","p","small","strong"]);for(var n,r=o(e.querySelectorAll(t));!(n=r()).done;){var i=n.value;i.style.fontFamily=window.getComputedStyle(i).fontFamily,i.style.fontSize=window.getComputedStyle(i).fontSize,i.style.fontWeight=window.getComputedStyle(i).fontWeight,i.style.width=window.getComputedStyle(i).width}},v=function(e){return"hide-when-downloading"!==e.className},y=function(e,i,v,y){void 0===y&&(y="png");try{var g=function(){!function(e){for(var t,n=o(e.querySelectorAll([".remove-when-downloading",".visible-when-downloading"]));!(t=n()).done;){var r=t.value;r.style.display=r.getAttribute("original_display")}}(e),n.saveAs(m,function(e){if(e.printDate){var t=(new Date).toDateString();return e.filename+" ("+t+")"}return e.filename||"Image"}(p)+"."+y)},p=function(e){return r({},f,e)}(i||{}),m=null;(function(e,t){void 0===t&&(t=!1);var n=e.querySelectorAll("svg");!function(e){d(e,[".fixed-text"])}(e),t&&d(e);for(var r,i=o(n);!(r=i()).done;){var u=r.value;s(u),h(u)}})(e,p.forceFixText),function(e){for(var t,n=o(e.querySelectorAll([".remove-when-downloading"]));!(t=n()).done;){var r=t.value;r.setAttribute("original_display",window.getComputedStyle(r).display),r.style.display="none"}}(e),function(e){for(var t,n=o(e.querySelectorAll([".visible-when-downloading"]));!(t=n()).done;){var r=t.value;r.setAttribute("original_display",window.getComputedStyle(r).display),r.style.display="flex"}}(e);var w=function(e,t){try{var n=Promise.resolve(v()).then(function(e){m=e})}catch(e){return t()}return n&&n.then?n.then(void 0,t):n}(0,function(){return Promise.resolve(function(e){try{var n=e.querySelectorAll("svg"),r=[],i=function(e,t,n){if("function"==typeof e[u]){var r,i,o,f=e[u]();if(function e(n){try{for(;!(r=f.next()).done;)if((n=t(r.value))&&n.then){if(!c(n))return void n.then(e,o||(o=a.bind(null,i=new l,2)));n=n.v}i?a(i,1,n):i=n}catch(e){a(i||(i=new l),2,e)}}(),f.return){var s=function(e){try{r.done||f.return()}catch(e){}return e};if(i&&i.then)return i.then(s,function(e){throw s(e)});s()}return i}if(!("length"in e))throw new TypeError("Object is not iterable");for(var h=[],d=0;d<e.length;d++)h.push(e[d]);return function(e,t,n){var r,i,o=-1;return function n(u){try{for(;++o<e.length;)if((u=t(o))&&u.then){if(!c(u))return void u.then(n,i||(i=a.bind(null,r=new l,2)));u=u.v}r?a(r,1,u):r=u}catch(e){a(r||(r=new l),2,e)}}(),r}(h,function(e){return t(h[e])})}(n,function(e){function n(){u.dataset.icon=i,u.width=e.clientWidth,u.height=e.clientHeight,e.replaceWith(u)}var i=e.getAttribute("data-icon"),o=r.find(function(e){return e.dataIcon===i}),u=document.createElement("img"),a=function(){if(!o)return Promise.resolve(t.svgAsPngUri(e,"icon.png")).then(function(e){u.src=e,r.push({dataIcon:i,uri:e})});u.src=o.uri}();return a&&a.then?a.then(n):n()});return Promise.resolve(i&&i.then?i.then(function(){}):void 0)}catch(e){return Promise.reject(e)}}(e)).then(function(){return Promise.resolve(v()).then(function(){return Promise.resolve(v()).then(function(e){m=e})})})});return Promise.resolve(w&&w.then?w.then(g):g())}catch(e){return Promise.reject(e)}},g=function(e,t,n){void 0===n&&(n="png");var i=t.backgroundColor,o=t.quality,u=t.pixelRatio,a=t.style,l=r({},function(e,t){if(t.width&&t.height)return{width:t.width,height:t.height};var n=window.getComputedStyle(e),r=n.height;return{width:Number.parseInt(n.width.replace("px",""),10)+4,height:Number.parseInt(r.replace("px",""),10)+4}}(e,t),{pixelRatio:1});return a&&(l=r({},l,{style:a})),i&&(l=r({},l,{backgroundColor:i})),u&&u>0&&(l=r({},l,{pixelRatio:u})),o&&n.includes("jpeg")&&(l=r({},l,{quality:o>=0&&o<=1?o:1})),l||{}},p=function(t,n,i){void 0===n&&(n={}),void 0===i&&(i={});try{return Promise.resolve(y(t,n,function(){return e.toPng(t,r({filter:v},g(t,i,"png")))},"png")).then(function(){})}catch(e){return Promise.reject(e)}};exports.downloadDOM=function(e,t,n){void 0===t&&(t="Image"),void 0===n&&(n=!1);try{return Promise.resolve(p(e,{forceFixText:n,filename:t})).then(function(){})}catch(e){return Promise.reject(e)}},exports.saveAsJpeg=function(t,n,i){void 0===n&&(n={}),void 0===i&&(i={});try{return Promise.resolve(y(t,n,function(){return e.toJpeg(t,r({filter:v},g(t,i,"jpeg")))},"jpeg")).then(function(){})}catch(e){return Promise.reject(e)}},exports.saveAsPng=p;
//# sourceMappingURL=index.js.map
